# org-cite-csl-activate

![Citation rendering demo](demo.gif)

An experimental CSL-based activation processor for Org citations, which
fontifies citations using rendered previews generated by `citeproc-el`. In
addition, tooltips over citations show a `mini bibliography' of the items
referred to.

## Requirements

+ Org 9.5 or later.
+ The [citeproc-el](https://github.com/andras-simonyi/citeproc-el) library.

## Installation

Drop `oc-csl-activate.el` somewhere on your load path.

## Usage

The library requires `cursor-sensor-mode` to be turned on in the Org buffer in
which citations should be rendered, and the provided activation processor should
be selected by executing

``` emacs-lisp
(require 'oc-csl-activate)
(setq org-cite-activate-processor 'csl-activate)
```

This causes _edited_ Org citations with valid cite keys to be rendered
immediately when the cursor leaves them, but unedited citations remain
unrendered. The interactive command

``` emacs-lisp
org-cite-csl-activate-render-all
```

in contrast, renders all Org citations in the current buffer.

One way of making sure that `cursor-sensor-mode` is turned on and citations are
rendered when an Org document is loaded is to add these commands to `org-mode-hook`:

``` emacs-lisp
(add-hook 'org-mode-hook
	      (lambda ()
	       (cursor-sensor-mode 1)
	       (org-cite-csl-activate-render-all)))
```

## Known bugs and limitations
This is untested code, you will most probably encounter some problems and
glitches. In particular,

+ deleting citations when the cursor positioned _after_ the citation behaves
  weirdly, because the rendered citation is not removed and the user is unable
  to see what is happening under the replaced text until everything gets deleted;
+ citation rendering is not disambiguated (only within the same citation);
+ rendering a large number of citations may be slow, my (old) laptop renders approximately 
  40 citations per second.





